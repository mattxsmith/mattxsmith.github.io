(window["webpackJsonplnd-bet-react"]=window["webpackJsonplnd-bet-react"]||[]).push([[0],{12:function(e,a,t){e.exports=t(24)},17:function(e,a,t){},24:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(11),l=t.n(i),s=(t(17),t(3));var d=function(e){var a={Home:"fa fa-home",Football:"fas fa-football-ball",Basketball:"fas fa-basketball-ball",Baseball:"fas fa-baseball-ball",Soccer:"fas fa-futbol",Other:"fas fa-ellipsis-v"},t=r.a.useState(["Home","Football","Baseball","Basketball","Soccer","Other"]),n=Object(s.a)(t,2),i=n[0],l=(n[1],i.map(function(e){return r.a.createElement("li",{className:"list-item",key:e},r.a.createElement("a",{href:"#"},r.a.createElement("i",{className:a[e]}),r.a.createElement("span",null,e)))}));return r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar-content"},r.a.createElement("div",{className:"navicon",id:"toggle-sidebar-icon"},r.a.createElement("button",{className:"menu-icon",onClick:function(e){var a=document.querySelector("#menuicon");document.body.classList.contains("sidebar-mini")?(document.body.classList.remove("sidebar-mini"),a.classList.remove("fa-bars"),a.classList.add("fa-times"),document.querySelector(".page-content").style.marginLeft="200px"):(document.body.classList.add("sidebar-mini"),a.classList.remove("fa-times"),a.classList.add("fa-bars"),document.querySelector(".page-content").style.marginLeft="75px")}},r.a.createElement("i",{id:"menuicon",className:"fas fa-chevron-right "}))),r.a.createElement("ul",{className:"sidebar-menu list-unstyled"},l)))};var c=function(e){var a="market:"+e.gameId+":"+e.marketId;return r.a.createElement("div",{className:"market-orderbook-row",id:a,onClick:e.openBetSlip},r.a.createElement("div",{className:"market-name "+a},e.name),r.a.createElement("div",{className:"market-bid "+a},e.bid),r.a.createElement("div",{className:"market-ask "+a},e.ask))};var o=function(e){var a={};e.info.markets.forEach(function(t){return a[t.id]=e.odds[t.id]||{bid:null,ask:null}});var t=e.info.markets.map(function(t){return r.a.createElement(c,{gameId:e.info.gameId,marketId:t.id,name:t.name,key:t.id,bid:a[t.id].bid,ask:a[t.id].ask,openBetSlip:e.openBetSlip})});return r.a.createElement("div",{id:"event:"+e.info.gameId},r.a.createElement("div",{className:"market-title"}," ",e.info.name),r.a.createElement("div",{className:"orderbook"},r.a.createElement("div",{className:"orderbook-header-row"},r.a.createElement("div",{className:"orderbook-header"},"Market"),r.a.createElement("div",{className:"orderbook-header"},"Bid"),r.a.createElement("div",{className:"orderbook-header"},"Ask")),t))};var m=function(e){var a={};e.gameList.games.forEach(function(t){var n;n=t.gameId,Object.keys(e.gameOdds).map(function(e){return Number(e)}).indexOf(Number(n))>=0?a[t.gameId]=e.gameOdds[t.gameId]:a[t.gameId]={}});var t=e.gameList.games.map(function(t){return r.a.createElement(o,{openBetSlip:e.openBetSlip,info:t,key:t.gameId,odds:a[t.gameId]})});return r.a.createElement("div",{id:"markets"},t)},u=function(e){return Number(e)>0?100/(e+100):e/(e-100)},f=function(e){return e.reduce(function(e,a){return e+a},0)},b=function(e){return""===(e=e.toString())?e:e=!(e=(e=e.replace(/[^+\-0-9].*$/g,"")).replace(/(.+)[^0-9]/,"$1")).startsWith("-")&&!e.startsWith("+")&&e.length>0?"+"+e:e},g=function(e){return""===(e=e.toString())?e:(e=(e=(e=(e=(e=e.replace(/[^0-9.].*$/g,"")).replace(/^\./g,"1.")).replace(/^[^1-9]/,"")).replace(/^([1-9][0-9]*\.[0-9]*)[^0-9]/g,"$1")).replace(/^(\d+)$/g,"$1.0"),e=Number.isNaN(e)?"":e)},p=function(e){return e.length>=4?Math.round(1e3*(e<0?-100/e+1:e/100+1))/1e3:""},k=function(e){return""===e||e<=1?"":(a=1/e)<.5?"+"+Math.round(100/a-100):"-"+Math.round(100/(1-a)-100);var a},E=function(e){return""==e?e:e=(e=(e=(e=e.replace(/[^0-9.]/g,"")).replace(/^\.$/g,"0.")).replace(/^0([^.])$/g,"$1")).replace(/^(.*\..*)\.$/g,"$1")},v=function(e,a){return Math.round(e*Math.pow(10,a))/Math.pow(10,a)};var h=function(e){var a=r.a.useState("Bid"),t=Object(s.a)(a,2),n=t[0],i=t[1],l="Bid"===n?"ask":"bid",d=e.selectedMarketOdds.filter(function(e){return e.side==l});d.sort(function(e,a){return u(e.price)-u(a.price)});var c=(d=d.slice(0,5))[0]||{price:"+100"};c=c.price;var o=r.a.useState(c),m=Object(s.a)(o,2),h=m[0],I=m[1],y=r.a.useState(g(p(h))),N=Object(s.a)(y,2),S=N[0],B=N[1],O=r.a.useState(1),j=Object(s.a)(O,2),w=j[0],x=j[1],C="$".concat(Math.round(10.563*w*100)/100);function L(e){var a="Bid"===e?"#bs-bid-select":"#bs-ask-select",t="Bid"===e?"#bs-ask-select":"#bs-bid-select",n=document.querySelector(a),r=document.querySelector(t);Object.assign(n.style,{border:"1px solid black",fontWeight:"bold",color:"black",background:"#b1d1de"});Object.assign(r.style,{border:"1px solid rgb(170, 168, 168)",ontWeight:"normal",color:"rgb(170, 168, 168)",background:"none"}),"Bid"===e&&(r.style.borderLeftStyle="none"),i(e)}function M(e){L("Buy"===e.target.innerText?"Bid":"Ask")}function A(e){if("american-price"===e.target.id){var a=b(e.target.value),t=g(p(a));I(a),B(t);var n=""===a||""===t;e.target.style.background=n?"#fbb":"none"}else{var r=g(e.target.value),i=b(k(r));B(r),I(i);var l=""===r||""===i;e.target.style.background=l?"#fbb":"none"}}function T(e){var a=e.target.id;e.target.style.background="#fff","american-price"===a?document.querySelector("#decimal-price").style.background="#ddd":document.querySelector("#american-price").style.background="#ddd"}var q={border:"1px solid #bbb",paddingLeft:".25em",height:"90%",width:"80px",marginTop:"2px"},F=Object.assign({background:"#ddd"},q),$=d.map(function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e.price),r.a.createElement("td",null,e.amount),r.a.createElement("td",null,v(f(d.filter(function(e,t){return t<=a}).map(function(e){return e.amount})),2)))}),W=r.a.createElement("table",{id:"orderbook-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"American"),r.a.createElement("td",null,"Amount (mBTC)"),r.a.createElement("td",{style:{}},"Cumulative"))),r.a.createElement("tbody",null,$)),z="Bid"===n?w*(S-1):w/(S-1),D="Bid"===n?"green":"red";z=v(z,3);var U=r.a.createElement("span",null,"You are betting "+w+" mBTC to win "+z+" mBTC. You will win if this event"," ",r.a.createElement("span",{style:{color:D}},"Bid"===n?"DOES":"DOESN'T")," "," happen.");U=h&&S?U:r.a.createElement("span",null);var Y={amount:w,price:h,gameId:e.selectedMarket.gameId,marketId:e.selectedMarket.marketId,side:n.toLowerCase()},H={method:"POST",headers:{"Content-Type":"application/json",Authorization:e.jwt},body:Y=JSON.stringify(Y)};return r.a.useEffect(function(){L("Bid"),I(c)},[]),r.a.createElement("div",{id:"bet-slip"},r.a.createElement("h3",{id:"bet-slip-title",style:{textAlign:"center",textDecoration:"underline"}},"Make a Bet"),r.a.createElement("button",{id:"close-bet-slip",onClick:e.closeFunc},r.a.createElement("i",{className:"fa fa-times"})),r.a.createElement("h4",null,r.a.createElement("b",null,"Event: "),e.selectedMarket.gameName),r.a.createElement("h4",null,r.a.createElement("b",null,"Market: "),e.selectedMarket.marketName),r.a.createElement("hr",{style:{border:".5px solid #999"}}),r.a.createElement("div",{id:"bs-bid-ask-selector"},r.a.createElement("div",{onClick:M,id:"bs-bid-select"},"Buy"),r.a.createElement("div",{onClick:M,id:"bs-ask-select"},"Sell")),r.a.createElement("div",{id:"orderbook"},r.a.createElement("h4",null,"Open Offers to ".concat("Bid"===n?"Sell":"Buy")),W),r.a.createElement("div",{id:"bs-prices"},r.a.createElement("h4",{style:{marginBottom:"1px"}},"Price"),r.a.createElement("div",null,r.a.createElement("span",null,"American"),r.a.createElement("input",{style:q,onFocus:T,id:"american-price",type:"text",size:10,onChange:A,value:h})),r.a.createElement("div",null,r.a.createElement("span",null,"Decimal"),r.a.createElement("input",{style:F,onFocus:T,id:"decimal-price",type:"text",size:10,onChange:A,value:S}))),r.a.createElement("div",{id:"bs-bet-amount"},r.a.createElement("h4",{style:{marginBottom:"1px"}},"Bet Amount"),r.a.createElement("div",null,r.a.createElement("span",null,"mBTC"),r.a.createElement("input",{style:q,id:"bs-mbtc-amount",type:"text",size:10,value:w,onChange:function(e){x(E(e.target.value))}})),r.a.createElement("div",null,r.a.createElement("span",null,"USD"),r.a.createElement("input",{disabled:!0,style:F,id:"bs-usd-amount",type:"text",size:10,value:C}))),r.a.createElement("div",{style:{marginTop:"10px",fontWeight:"bold"}},U),r.a.createElement("div",{id:"bs-submit"},r.a.createElement("button",{id:"bs-submit-button",onClick:function(){fetch("https://qr6ymdjft0.execute-api.us-east-1.amazonaws.com/prod/create-offer",H).then(function(e){201===e.status?document.querySelector("#bs-bet-succeed").style.display="block":document.querySelector("#bs-bet-failed").style.display="block"})}},"Submit")),r.a.createElement("div",{id:"bs-bet-succeed"},"Your bet was successfully placed."),r.a.createElement("div",{id:"bs-bet-failed"},"There was a problem and your bet was not placed."))};t(9);var I=function(e){var a;if(e.user){var t=e.user.replace("-at-","@");a=r.a.createElement("span",null,"Logged In As: ",t," | ",r.a.createElement("a",{href:"/",onClick:e.signOutFunc},"Log Out"))}else a=r.a.createElement("span",null,r.a.createElement("a",{href:"signin.html"},"Log In"));return r.a.createElement("div",{id:"user-banner",style:{fontWeight:"bold"}},a)},y={games:[{markets:[{name:"Seattle Seahawks",id:"1"},{name:"Arizona Cardinals",id:"2"},{name:"Los Angeles Rams",id:"3"},{name:"San Francisco 49ers",id:"4"}],gameId:"2",name:"NFC West Winner",sport:"Football"},{markets:[{name:"Los Angeles Clippers",id:"1"},{name:"Toronto Raptors",id:"2"},{name:"Houston Rockets",id:"3"},{name:"Other",id:"4"}],gameId:"1",name:"2019 NBA Champion",sport:"basketball"},{markets:[{name:"Houston Astros",id:"1"},{name:"New York Yankees",id:"2"},{name:"Other",id:"3"}],gameId:"3",name:"2019 MLB AL Champions",sport:"Baseball"},{markets:[{name:"Seahawks -8.5",id:"1"},{name:"O/U 45.5",id:"2"}],gameId:"-1",name:"NFL Week 1: Bengals @ Seahawks",sport:"Football"}]},N={offers:[{marketId:2,offerId:"klmfffalsdjnjaasd",userId:1,amount:1.3,side:"ask",price:"-224",gameId:-1},{marketId:2,offerId:"ffalsdjnjaasd",userId:1,amount:1.3,side:"bid",price:"-200",gameId:-1},{marketId:1,offerId:"klmfalsdjnjaasd",userId:1,amount:1.3,side:"ask",price:"+124",gameId:-1},{marketId:2,offerId:"klmfffalnjaasd",userId:1,amount:1.3,side:"ask",price:"+224",gameId:1},{marketId:2,offerId:"smith",userId:1,amount:1.3,side:"bid",price:"-201",gameId:-1},{marketId:1,offerId:"klmfalsdjnjasd",userId:1,amount:1.3,side:"bid",price:"+145",gameId:-1},{marketId:2,offerId:"matthew",userId:1,amount:1.3,side:"bid",price:"-204",gameId:-1}]},S=t(23);var B=function(){var e={"-1":{1:{bid:"+134",ask:"+122"}}},a=r.a.useState({games:[]}),t=Object(s.a)(a,2),n=t[0],i=t[1],l=r.a.useState([]),c=Object(s.a)(l,2),o=c[0],u=c[1],f={gameId:void 0,marketId:void 0,gameName:void 0,marketName:void 0},b=r.a.useState(f),g=Object(s.a)(b,2),p=g[0],k=g[1];function E(){for(var a={},t=0;t<o.length;t++){var n=o[t],r=n.side;if(-1===Object.keys(a).indexOf(n.gameId.toString())&&(a[n.gameId]={}),-1===Object.keys(a[n.gameId]).indexOf(n.marketId.toString())&&(a[n.gameId][n.marketId]={bid:void 0,ask:void 0}),"bid"===r){var i=a[n.gameId][n.marketId].bid,l=Number(n.price)<(Number(i)||999999)?n.price:i;a[n.gameId][n.marketId].bid=l}else if("ask"===r){var s=a[n.gameId][n.marketId].ask,d=Number(n.price)>(Number(s)||-999999)?n.price:s;a[n.gameId][n.marketId].ask=d}}e=a}r.a.useEffect(function(){!function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])y.games.sort(function(e,a){return e.gameId-a.gameId}),i(y),E(y.games);else{fetch("https://qr6ymdjft0.execute-api.us-east-1.amazonaws.com/prod/get-games").then(function(e){return e.json()}).then(function(e){return e.games.sort(function(e,a){return e.gameId-a.gameId}),i(e),e.games}).then(function(e){return E()})}}(),function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])u(N.offers);else{fetch("https://qr6ymdjft0.execute-api.us-east-1.amazonaws.com/prod/get-offers").then(function(e){return e.json()}).then(function(e){return u(e.offers)})}}(n.games)},[]),E();var v=o.filter(function(e){return e.gameId===p.gameId});v=v.filter(function(e){return e.marketId===p.marketId});var B,O,j=new S.CognitoUserPool({UserPoolId:"us-east-1_MGapEsnoj",ClientId:"7khip3shhdpt8rgf971ptn73ci"}).getCurrentUser();j&&(B=j.username,j.getSession(function(e,a){O=a.getIdToken().getJwtToken()}));var w=r.a.createElement("div",{id:"bet-slip-login"},r.a.createElement("h3",null,"To make a bet, please ",r.a.createElement("a",{href:"signin.html"},"sign in "),"or ",r.a.createElement("a",{href:"register.html"},"register")," for an account."));return p.marketId&&O&&(w=r.a.createElement(h,{selectedMarket:p,closeFunc:function(e){k(f)},odds:e,selectedMarketOdds:v,jwt:O})),r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(I,{user:B,signOutFunc:function(e){return j.signOut()}}),r.a.createElement("div",{className:"page-content"},r.a.createElement("h1",{style:{marginBottom:"1em"}},"Lightning Bet"),r.a.createElement(m,{openBetSlip:function(e){if(O){var a,t,r;e.target.className.split(" ").forEach(function(e){e.startsWith("market:")&&(a=e)});var i=(a=a||e.target.id).split(":"),l=i[1],s=i[2];n.games.forEach(function(e){e.gameId===l&&(t=e)}),t.markets.forEach(function(e){e.id===s&&(r=e)});var d={gameId:Number(l),marketId:Number(s),gameName:t.name,marketName:r.name};k(d)}else document.querySelector("#bet-slip-login").style.display="block"},gameList:n,gameOdds:e}),w))};l.a.render(r.a.createElement(B,null),document.getElementById("root"))},9:function(e,a,t){}},[[12,1,2]]]);
//# sourceMappingURL=main.6d711e40.chunk.js.map